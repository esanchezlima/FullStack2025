<h6>List of authors</h6>

<div class="filter-container">
  <mat-form-field class="w-100">
    <mat-label>Genre Filter</mat-label>
    <mat-select (selectionChange)="onGenreChange($event)">
      <mat-option>None</mat-option>
      @for (genre of genres | async; track genre) {
        <mat-option [value]="genre">{{genre}}</mat-option>
      }
    </mat-select>
  </mat-form-field>
</div>

<div class="search-query-container">
  <mat-form-field class="w-100">
    <mat-label>Search Query</mat-label>
    <input matInput (keyup)="applySearchQuery($event)" placeholder="Search Query">
  </mat-form-field>
</div>

<div class="container">
  <mat-card class="table-card">
    <mat-card-content>
      <div class="table-container">
        <table mat-table
        [dataSource]="authors.data"
        class="table"
        matSort
        matSortDisableClear
        matSortActive="name"
        matSortDirection="asc"
      >

          <ng-container matColumnDef="authorId">
            <th mat-header-cell *matHeaderCellDef>ID</th>
            <td mat-cell *matCellDef="let author">{{author.authorId}}</td>
          </ng-container>

          <ng-container matColumnDef="name">
            <th mat-header-cell *matHeaderCellDef mat-sort-header disableClear>Name</th>
            <td mat-cell *matCellDef="let author">{{author.name}}</td>
          </ng-container>

          <ng-container matColumnDef="age">
            <th mat-header-cell *matHeaderCellDef mat-sort-header disableClear>Age</th>
            <td mat-cell *matCellDef="let author">{{author.age}}</td>
          </ng-container>

          <ng-container matColumnDef="genre">
            <th mat-header-cell *matHeaderCellDef mat-sort-header disableClear>Genre</th>
            <td mat-cell *matCellDef="let author">{{author.genre}}</td>
          </ng-container>

          <ng-container matColumnDef="firstName">
            <th mat-header-cell *matHeaderCellDef>First Name</th>
            <td mat-cell *matCellDef="let author">{{author.firstName}}</td>
          </ng-container>

          <ng-container matColumnDef="lastName">
            <th mat-header-cell *matHeaderCellDef>Last Name</th>
            <td mat-cell *matCellDef="let author">{{author.lastName}}</td>
          </ng-container>

          <ng-container matColumnDef="dateOfBirth">
            <th mat-header-cell *matHeaderCellDef>Date Of Birth</th>
            <td mat-cell *matCellDef="let author">{{author.dateOfBirth | date:'dd/MM/yyyy' }}</td>
          </ng-container>

          <ng-container matColumnDef="actions">
            <th mat-header-cell *matHeaderCellDef> Actions </th>
            <td mat-cell *matCellDef="let author">
              <button mat-icon-button matTooltip="Edit Author" (click)="editAuthor(author)">
                <mat-icon>edit</mat-icon>
              </button>
              <button mat-icon-button matTooltip="Delete Author" (click)="deleteAuthor(author)">
                <mat-icon>delete</mat-icon>
              </button>
            </td>
          </ng-container>

          <tr mat-header-row *matHeaderRowDef="displayedColumns; sticky: true"></tr>
          <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
        </table>
      </div>
      <mat-paginator
        [length]="authors.pagination.totalCount"
        showFirstLastButtons
        [pageSizeOptions]="[5, 10, 20]"
        class="table-paginator">
      </mat-paginator>
    </mat-card-content>
  </mat-card>
</div>

